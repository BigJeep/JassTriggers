//
//- Functions
function Ancestral_Vision takes nothing returns boolean
  local unit caster = GetTriggerUnit()
  
  local player p = GetOwningPlayer(caster)
  
  local real x = GetUnitX (caster)
  local real y = GetUnitY (caster)
  
  local unit temp = CreateUnit (p, 'h001',x , y, 0.)
  call UnitApplyTimedLife (temp, 'BTLF', 10.)
  call UnitAddAbility (temp, 'Ancestral Vision Res')
  call IssueImmediateOrder (temp, 'resurrection')
  
  set caster = null
  set temp = null
  set player = null

return false

endfunction

//- Triggers
function InitTrig_Ancestral_Vision takes nothing returns nothing
  local trigger t = CreateTrigger()
  
  call TriggerRegisterAnyUnitEventBJ (t, EVENT_PLAYER_UNIT_DIES)
  call TriggerAddCondition (t, Condition (function Ancestral_Vision))
  
  set t = null
//
